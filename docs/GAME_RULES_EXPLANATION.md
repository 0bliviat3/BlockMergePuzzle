# 🎮 게임 룰 & UI 설명

## 🎯 게임 목표

**2048 스타일 블록 병합 퍼즐 게임**

- 같은 숫자(레벨)의 인접한 블록을 병합해서 더 높은 숫자를 만드는 게임
- 최고 점수 달성이 목표

---

## 📊 화면 구성

### 1️⃣ 숫자 **있는** 블록 (Block) ⭐ 중요!

```
┌─────┐
│  2  │  ← 클릭 가능! 이게 플레이하는 블록
└─────┘

레벨 1 = 2
레벨 2 = 4
레벨 3 = 8
레벨 4 = 16
...
```

**특징:**
- 숫자가 표시됨
- 클릭 가능
- 병합 가능
- 이게 실제 게임에서 조작하는 블록!

---

### 2️⃣ 숫자 **없는** 블록 (Cell) 

```
┌─────┐
│     │  ← 배경 격자, 클릭 불가
└─────┘

빈 공간을 표시하는 UI
```

**특징:**
- 숫자 없음
- 클릭 불가
- 배경 역할만 함
- 단순히 "여기에 블록이 들어갈 수 있어요" 표시

**중요:** 이것은 게임 플레이와 무관한 **배경 UI**입니다!

---

## 🎮 게임 플레이 방법

### 1단계: 게임 시작
```
5x5 그리드에 숫자 블록 3개가 랜덤 위치에 생성됨
대부분 레벨 1 (숫자 2) 블록
```

### 2단계: 블록 선택
```
블록 클릭 → 선택됨 (노란색으로 변함 또는 크기 커짐)
```

### 3단계: 병합
```
1. 첫 번째 블록 클릭 (선택)
2. 인접한 같은 레벨 블록 클릭
3. 병합됨! 2 + 2 = 4
4. 점수 획득
5. 새 블록 자동 추가! ⭐
```

### 4단계: 반복
```
병합 → 새 블록 추가 → 병합 → 새 블록 추가 ...
```

---

## 💡 핵심 메커니즘

### 병합 후 자동으로 새 블록 추가!

```
블록 병합 완료
    ↓
0.5초 대기
    ↓
새 블록 1개 자동 추가 (90% 확률로 레벨 1, 10% 확률로 레벨 2)
    ↓
빈 공간에 랜덤 배치
```

**이것이 게임을 계속 플레이 가능하게 만드는 핵심!**

---

## 🚨 현재 상황 설명

### 왜 처음에 아무것도 못하는가?

```
상황: 5x5 그리드에 블록 3개, 모두 멀리 떨어져 있음

┌───┬───┬───┬───┬───┐
│ 2 │   │   │   │   │
├───┼───┼───┼───┼───┤
│   │   │   │   │   │
├───┼───┼───┼───┼───┤
│   │   │ 2 │   │   │
├───┼───┼───┼───┼───┤
│   │   │   │   │   │
├───┼───┼───┼───┼───┤
│   │   │   │   │ 2 │
└───┴───┴───┴───┴───┘

→ 인접한 블록이 없어서 병합 불가!
→ 이건 게임 설계 문제!
```

---

## 🔧 해결 방법

### 방법 1: 시작 블록 수 증가 (권장) ⭐

```csharp
// GameManager Inspector에서 수정
Starting Blocks: 3 → 6~8

더 많은 블록으로 시작 → 병합 기회 증가
```

### 방법 2: 초기 배치 알고리즘 개선

```csharp
// 시작 블록들을 인접하게 배치
// Grid.cs에 새 함수 추가 필요
```

### 방법 3: 초기 블록을 특정 위치에 배치

```csharp
// GameManager.cs StartNewGame() 수정
// 중앙 부근에 블록 배치
grid.AddBlockAt(new Vector2Int(2, 2), 1);
grid.AddBlockAt(new Vector2Int(2, 3), 1);
grid.AddBlockAt(new Vector2Int(3, 2), 1);
```

---

## 🎯 올바른 게임 플레이 예시

### 이상적인 시작:
```
┌───┬───┬───┬───┬───┐
│   │ 2 │   │   │   │
├───┼───┼───┼───┼───┤
│   │ 2 │ 2 │   │   │
├───┼───┼───┼───┼───┤
│   │   │ 2 │   │   │
├───┼───┼───┼───┼───┤
│   │   │   │   │   │
├───┼───┼───┼───┼───┤
│   │   │   │   │   │
└───┴───┴───┴───┴───┘

인접한 2들이 많음 → 병합 가능!
```

### 플레이:
```
1. (1,1)의 2 클릭
2. (1,2)의 2 클릭 → 병합!
3. (1,1)이 4가 됨
4. 새 블록 자동 추가 (예: (4,4)에 2)
5. 계속 병합...
```

---

## 🆘 Cell 프리팹 설정 확인 (중요!)

### Cell 프리팹이 클릭을 방해하면 안됨!

```
Project → Cell 프리팹 선택
Inspector → Image 컴포넌트
→ ✗ Raycast Target 체크 해제! (중요!)

이유:
- Cell은 배경일 뿐
- Raycast Target이 체크되어 있으면 Block 클릭을 방해함
```

---

## 📊 게임 진행 흐름

```
시작: 블록 3개 (또는 6~8개)
    ↓
병합 1회
    ↓
새 블록 1개 추가 (자동)
    ↓
병합 1회
    ↓
새 블록 1개 추가 (자동)
    ↓
...반복...
    ↓
그리드 가득참 + 병합 불가
    ↓
게임 오버
```

---

## 🎮 실제 테스트 시나리오

### 정상 작동 확인:

1. **게임 시작**
   ```
   Console: "✓ 블록 3개 생성 성공"
   ```

2. **블록 클릭**
   ```
   Console: "블록 클릭됨: 레벨 1, 위치 (2, 2)"
   블록이 노란색으로 변함 (또는 커짐)
   ```

3. **인접 블록 클릭**
   ```
   Console: "병합 시도: (2,2) + (2,3)"
   Console: "=== 블록 병합 시작 ==="
   Console: "새 블록 추가됨: 레벨 1"
   ```

4. **새 블록 확인**
   ```
   빈 공간 어딘가에 새로운 블록 나타남!
   ```

---

## 🔧 빠른 수정 (권장)

### GameManager Inspector 수정:

```
GameManager:
├─ Starting Blocks: 3 → 8  ⭐ 이것만 바꿔도 해결!
├─ New Blocks Per Turn: 1
└─ New Block Delay: 0.5
```

**Starting Blocks를 8로 설정하면:**
- 게임 시작부터 인접한 블록들이 많아짐
- 즉시 병합 가능
- 게임 플레이가 자연스러워짐

---

## 💡 요약

### 현재 문제:
```
❌ 시작 블록 3개 → 너무 적음
❌ 인접하지 않게 배치 → 병합 불가
❌ 게임이 막힘
```

### 해결:
```
✅ Starting Blocks를 8로 증가
✅ Cell 프리팹의 Raycast Target 체크 해제
✅ 병합 후 자동으로 새 블록 추가되는 것 확인
```

### 게임 플레이:
```
1. 숫자 있는 블록만 클릭 가능
2. 인접한 같은 숫자 블록 2개 선택 → 병합
3. 병합 후 자동으로 새 블록 추가됨
4. 반복
```

---

이제 `Starting Blocks`를 8로 설정하고 다시 Play 해보세요! 🎮
